<!-- <p class="rss-subscribe">subscribe <a href="{{ "/feed.xml" | prepend: site.baseurl }}">via RSS</a></p> -->

<script src="/js/instantclick.min.js" data-no-instant></script>
<script data-no-instant>
	InstantClick.init();

	addTypo();

	// mobile hack

	/*! Normalized address bar hiding for iOS & Android (c) @scottjehl MIT License */
	(function( win ){
		var doc = win.document;

		// If there's a hash, or addEventListener is undefined, stop here
		if(!win.navigator.standalone && !location.hash && win.addEventListener ){

			//scroll to 1
			win.scrollTo( 0, 1 );
			var scrollTop = 1,
				getScrollTop = function(){
					return win.pageYOffset || doc.compatMode === "CSS1Compat" && doc.documentElement.scrollTop || doc.body.scrollTop || 0;
				},

				//reset to 0 on bodyready, if needed
				bodycheck = setInterval(function(){
					if( doc.body ){
						clearInterval( bodycheck );
						scrollTop = getScrollTop();
						win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
					}
				}, 15 );

			win.addEventListener( "load", function(){
				setTimeout(function(){
					//at load, if user hasn't scrolled more than 20 or so...
					if( getScrollTop() < 20 ){
						//reset to hide addr bar at onload
						win.scrollTo( 0, scrollTop === 1 ? 0 : 1 );
					}
				}, 0);
			}, false );
		}
	})( this );

	InstantClick.on('change', addTypo);

	function addTypo () {
		if (document.querySelector('.slaquo, .sbrace') == null) return;

		function forEachElement(selector, fn) {
			var elements = document.querySelectorAll(selector);
			for (var i = 0; i < elements.length; i++) fn(elements[i], i);
		}

		forEachElement('body *:not(script):not(style)', function(el, i){
			el.innerHTML = el.innerHTML.replace(/«/g, '<span class="slaquo"> </span> <span class="hlaquo"> «</span>')
			el.innerHTML = el.innerHTML.replace(/\(/g, '<span class="sbrace"> </span> <span class="hbrace"> (</span>')
		});
	}
</script>